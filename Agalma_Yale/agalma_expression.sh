#!/bin/bash
#SBATCH -J agalma
#SBATCH -t 24:00:00
#SBATCH -c 8
#SBATCH --mem=20G
#SBATCH -o expression-%j.out
#SBATCH -e expression-%j.out
#SBATCH --array=1-136
sleep $((SLURM_ARRAY_TASK_ID*60))

module load miniconda

source activate agalma

export AGALMA_DB="/home/cm2477/scratch60/siphonophore2016/agalma-siphonophora.sqlite"

REFS=(
	HWI-ST625-51-C02UNACXX-8-BARGMANNIA
	HWI-ST625-51-C02UNACXX-8-BARGMANNIA
	HWI-ST625-51-C02UNACXX-8-BARGMANNIA
	HWI-ST625-51-C02UNACXX-8-BARGMANNIA
	HWI-ST625-51-C02UNACXX-8-BARGMANNIA
	HWI-ST625-51-C02UNACXX-8-BARGMANNIA
	HWI-ST625-51-C02UNACXX-8-BARGMANNIA
	HWI-ST625-51-C02UNACXX-8-BARGMANNIA
	HWI-ST625-51-C02UNACXX-8-BARGMANNIA
	HWI-ST625-51-C02UNACXX-8-BARGMANNIA
	HWI-ST625-51-C02UNACXX-8-BARGMANNIA
	HWI-ST625-51-C02UNACXX-8-BARGMANNIA
	HWI-ST625-51-C02UNACXX-8-BARGMANNIA
	HWI-ST625-51-C02UNACXX-8-BARGMANNIA
	HWI-ST625-51-C02UNACXX-8-BARGMANNIA
	HWI-ST625-51-C02UNACXX-8-BARGMANNIA
	HWI-ST625-51-C02UNACXX-8-BARGMANNIA
	HWI-ST625-51-C02UNACXX-8-BARGMANNIA
	HWI-ST625-51-C02UNACXX-8-BARGMANNIA

	K00162-189-HJTYGBBXX-7-NCAGTG
	K00162-189-HJTYGBBXX-7-NCAGTG
	K00162-189-HJTYGBBXX-7-NCAGTG
	K00162-189-HJTYGBBXX-7-NCAGTG
	K00162-189-HJTYGBBXX-7-NCAGTG
	K00162-189-HJTYGBBXX-7-NCAGTG
	K00162-189-HJTYGBBXX-7-NCAGTG
	K00162-189-HJTYGBBXX-7-NCAGTG

	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA
	HWI-ST625-51-C02UNACXX-6-FRILLAGALMA

	HWI-ST625-159-C4MVCACXX-5-CCGTCC
	HWI-ST625-159-C4MVCACXX-5-CCGTCC
	HWI-ST625-159-C4MVCACXX-5-CCGTCC
	HWI-ST625-159-C4MVCACXX-5-CCGTCC
	HWI-ST625-159-C4MVCACXX-5-CCGTCC
	HWI-ST625-159-C4MVCACXX-5-CCGTCC

	HWI-ST625-51-C02UNACXX-7-NANOMIA
	HWI-ST625-51-C02UNACXX-7-NANOMIA
	HWI-ST625-51-C02UNACXX-7-NANOMIA
	HWI-ST625-51-C02UNACXX-7-NANOMIA
	HWI-ST625-51-C02UNACXX-7-NANOMIA
	HWI-ST625-51-C02UNACXX-7-NANOMIA
	HWI-ST625-51-C02UNACXX-7-NANOMIA
	HWI-ST625-51-C02UNACXX-7-NANOMIA
	HWI-ST625-51-C02UNACXX-7-NANOMIA
	HWI-ST625-51-C02UNACXX-7-NANOMIA
	HWI-ST625-51-C02UNACXX-7-NANOMIA
	HWI-ST625-51-C02UNACXX-7-NANOMIA
	HWI-ST625-51-C02UNACXX-7-NANOMIA
	HWI-ST625-51-C02UNACXX-7-NANOMIA
	HWI-ST625-51-C02UNACXX-7-NANOMIA
	HWI-ST625-51-C02UNACXX-7-NANOMIA
	HWI-ST625-51-C02UNACXX-7-NANOMIA
	HWI-ST625-51-C02UNACXX-7-NANOMIA
	HWI-ST625-51-C02UNACXX-7-NANOMIA

	HWI-ST625-73-C0JUVACXX-7-TTAGGC
	HWI-ST625-73-C0JUVACXX-7-TTAGGC
	HWI-ST625-73-C0JUVACXX-7-TTAGGC
	HWI-ST625-73-C0JUVACXX-7-TTAGGC
	HWI-ST625-73-C0JUVACXX-7-TTAGGC
	HWI-ST625-73-C0JUVACXX-7-TTAGGC
	HWI-ST625-73-C0JUVACXX-7-TTAGGC
	HWI-ST625-73-C0JUVACXX-7-TTAGGC
	HWI-ST625-73-C0JUVACXX-7-TTAGGC
	HWI-ST625-73-C0JUVACXX-7-TTAGGC
	HWI-ST625-73-C0JUVACXX-7-TTAGGC
	HWI-ST625-73-C0JUVACXX-7-TTAGGC
	HWI-ST625-73-C0JUVACXX-7-TTAGGC
	HWI-ST625-73-C0JUVACXX-7-TTAGGC
	HWI-ST625-73-C0JUVACXX-7-TTAGGC
	HWI-ST625-73-C0JUVACXX-7-TTAGGC

	HWI-ST625-73-C0JUVACXX-7-AGALMA2
	HWI-ST625-73-C0JUVACXX-7-AGALMA2
	HWI-ST625-73-C0JUVACXX-7-AGALMA2
	HWI-ST625-73-C0JUVACXX-7-AGALMA2
	HWI-ST625-73-C0JUVACXX-7-AGALMA2
	HWI-ST625-73-C0JUVACXX-7-AGALMA2
	HWI-ST625-73-C0JUVACXX-7-AGALMA2
	HWI-ST625-73-C0JUVACXX-7-AGALMA2
	HWI-ST625-73-C0JUVACXX-7-AGALMA2
	HWI-ST625-73-C0JUVACXX-7-AGALMA2
	HWI-ST625-73-C0JUVACXX-7-AGALMA2
	HWI-ST625-73-C0JUVACXX-7-AGALMA2
	HWI-ST625-73-C0JUVACXX-7-AGALMA2
	HWI-ST625-73-C0JUVACXX-7-AGALMA2
	HWI-ST625-73-C0JUVACXX-7-AGALMA2
	HWI-ST625-73-C0JUVACXX-7-AGALMA2
	HWI-ST625-73-C0JUVACXX-7-AGALMA2
	HWI-ST625-73-C0JUVACXX-7-AGALMA2
	HWI-ST625-73-C0JUVACXX-7-AGALMA2
	HWI-ST625-73-C0JUVACXX-7-AGALMA2
)

IDS=(
	HWI-ST625-163-C790DACXX-1-CGATGT
	HWI-ST625-163-C790DACXX-1-CAGATC
	HWI-ST625-163-C790DACXX-1-AGTCAA
	HWI-ST625-163-C790DACXX-1-AGTTCC
	HWI-ST625-163-C790DACXX-1-ATGTCA
	HWI-ST625-163-C790DACXX-6-ATTCCT
	HWI-ST625-163-C790DACXX-1-TGACCA
	HWI-ST625-163-C790DACXX-1-CCGTCC
	HWI-ST625-163-C790DACXX-2-CGATGT
	HWI-ST625-163-C790DACXX-2-TGACCA
	HWI-ST625-163-C790DACXX-2-CAGATC
	HWI-ST625-163-C790DACXX-2-AGTTCC
	HWI-ST625-163-C790DACXX-2-ATGTCA
	HWI-ST625-163-C790DACXX-2-CCGTCC
	HISEQ2000-551-C9GMCACXX-1-CGATGT
	HISEQ2000-551-C9GMCACXX-1-TGACCA
	HISEQ2000-551-C9GMCACXX-1-CAGATC
	HISEQ2000-551-C9GMCACXX-1-TTAGGC
	HISEQ2000-551-C9GMCACXX-1-ACTGAT

	HWI-ST625-163-C790DACXX-3-ACAGTG
	HWI-ST625-163-C790DACXX-3-ACTTGA
	HWI-ST625-163-C790DACXX-3-TAGCTT
	HWI-ST625-163-C790DACXX-3-CTTGTA
	HWI-ST625-163-C790DACXX-3-GTCCGC
	HWI-ST625-163-C790DACXX-3-GTGAAA
	HISEQ2000-551-C9GMCACXX-3-CGTACG
	HISEQ2000-551-C9GMCACXX-3-ATTCCT

	HWI-ST625-163-C790DACXX-4-ATCACG
	HWI-ST625-163-C790DACXX-4-ACTTGA
	HWI-ST625-163-C790DACXX-4-TAGCTT
	HWI-ST625-163-C790DACXX-4-GGCTAC
	HWI-ST625-163-C790DACXX-4-GTGGCC
	HWI-ST625-163-C790DACXX-4-GTTTCG
	HWI-ST625-163-C790DACXX-4-ACTGAT
	HWI-ST625-163-C790DACXX-5-ACAGTG
	HWI-ST625-163-C790DACXX-3-GCCAAT
	HWI-ST625-163-C790DACXX-5-GCCAAT
	HWI-ST625-163-C790DACXX-3-ATCACG
	HWI-ST625-163-C790DACXX-5-ATCACG
	HWI-ST625-163-C790DACXX-5-ACTTGA
	HWI-ST625-163-C790DACXX-5-TAGCTT
	HWI-ST625-163-C790DACXX-5-CTTGTA
	HWI-ST625-163-C790DACXX-5-GTCCGC
	HWI-ST625-163-C790DACXX-5-GTGAAA
	HISEQ2000-551-C9GMCACXX-2-ATCACG
	HISEQ2000-551-C9GMCACXX-2-ACTTGA
	HISEQ2000-551-C9GMCACXX-2-TAGCTT
	HISEQ2000-551-C9GMCACXX-2-GGCTAC
	HISEQ2000-551-C9GMCACXX-2-CGTACG
	HISEQ2000-551-C9GMCACXX-2-ACTGAT
	HISEQ2000-551-C9GMCACXX-2-ATTCCT
	HISEQ2000-551-C9GMCACXX-1-GCCAAT
	HISEQ2000-551-C9GMCACXX-2-GCCAAT
	HISEQ2000-551-C9GMCACXX-3-GCCAAT
	HISEQ2000-551-C9GMCACXX-6-GCCAAT
	HISEQ2000-551-C9GMCACXX-1-ATCACG
	HISEQ2000-551-C9GMCACXX-3-ATCACG
	HISEQ2000-551-C9GMCACXX-4-ATCACG
	HISEQ2000-551-C9GMCACXX-5-ATCACG
	HISEQ2000-551-C9GMCACXX-6-ATCACG
	HISEQ2000-551-C9GMCACXX-7-ATCACG
	HISEQ2000-551-C9GMCACXX-8-ATCACG
	HISEQ2500-185-CBERHANXX-2-GCCAAT
	HISEQ2500-185-CBERHANXX-4-GCCAAT
	HISEQ2500-185-CBERHANXX-4-ATCACG
	HISEQ2500-185-CBERHANXX-3-GCCAAT
	HISEQ2500-185-CBERHANXX-3-ATCACG
	HISEQ2500-185-CBERHANXX-5-GCCAAT
	HISEQ2500-185-CBERHANXX-5-ATCACG

	HISEQ2000-551-C9GMCACXX-3-CGATGT
	HISEQ2000-551-C9GMCACXX-3-TGACCA
	HISEQ2000-551-C9GMCACXX-3-TTAGGC
	HISEQ2000-551-C9GMCACXX-3-GTGAAA
	HISEQ2500-185-CBERHANXX-3-CGATGT
	HISEQ2500-185-CBERHANXX-3-CAGATC

	HISEQ2000-551-C9GMCACXX-4-ATTCCT
	HISEQ2000-551-C9GMCACXX-4-ACAGTG
	HISEQ2000-551-C9GMCACXX-4-GCCAAT
	HISEQ2000-551-C9GMCACXX-4-GTTTCG
	HISEQ2000-551-C9GMCACXX-4-CTTGTA
	HISEQ2000-551-C9GMCACXX-4-GTGAAA
	HISEQ2000-551-C9GMCACXX-4-GAGTGG
	HISEQ2000-551-C9GMCACXX-4-ACTGAT
	HISEQ2000-551-C9GMCACXX-6-TTAGGC
	HISEQ2000-551-C9GMCACXX-6-GATCAG
	HISEQ2000-551-C9GMCACXX-6-CGTACG
	HISEQ2000-551-C9GMCACXX-6-ATTCCT
	HISEQ2000-551-C9GMCACXX-6-GTGAAA
	HISEQ2000-551-C9GMCACXX-6-GTGGCC
	HISEQ2500-185-CBERHANXX-4-GATCAG
	HISEQ2500-185-CBERHANXX-4-CGTACG
	HISEQ2500-185-CBERHANXX-4-ACTGAT
	HISEQ2500-185-CBERHANXX-4-ATTCCT
	HISEQ2500-185-CBERHANXX-4-GGCTAC

	HISEQ2000-551-C9GMCACXX-5-ACAGTG
	HISEQ2000-551-C9GMCACXX-5-GCCAAT
	HISEQ2000-551-C9GMCACXX-5-CTTGTA
	HISEQ2000-551-C9GMCACXX-5-ATGTCA
	HISEQ2000-551-C9GMCACXX-5-GTGAAA
	HISEQ2000-551-C9GMCACXX-5-GAGTGG
	HISEQ2000-551-C9GMCACXX-7-ACAGTG
	HISEQ2000-551-C9GMCACXX-7-GCCAAT
	HISEQ2000-551-C9GMCACXX-7-ATGTCA
	HISEQ2000-551-C9GMCACXX-7-CTTGTA
	HISEQ2000-551-C9GMCACXX-7-GTGGCC
	HISEQ2000-551-C9GMCACXX-7-GAGTGG
	HISEQ2000-551-C9GMCACXX-7-ACTGAT
	HISEQ2500-185-CBERHANXX-3-ACAGTG
	HISEQ2500-185-CBERHANXX-3-ATGTCA
	HISEQ2500-185-CBERHANXX-3-GTGAAA

	HISEQ2000-551-C9GMCACXX-8-CGATGT
	HISEQ2000-551-C9GMCACXX-8-GCCAAT
	HISEQ2000-551-C9GMCACXX-8-TGACCA
	HISEQ2000-551-C9GMCACXX-8-CAGATC
	HISEQ2000-551-C9GMCACXX-8-ACAGTG
	HISEQ2000-551-C9GMCACXX-8-CTTGTA
	HISEQ2000-551-C9GMCACXX-8-GTGAAA
	HISEQ2000-551-C9GMCACXX-8-CCGTCC
	HISEQ2000-551-C9GMCACXX-8-ACTGAT
	HISEQ2500-185-CBERHANXX-2-ATCACG
	HISEQ2500-185-CBERHANXX-2-ACTTGA
	HISEQ2500-185-CBERHANXX-2-TAGCTT
	HISEQ2500-185-CBERHANXX-2-GGCTAC
	HISEQ2500-185-CBERHANXX-2-GTGGCC
	HISEQ2500-185-CBERHANXX-5-GAGTGG
	HISEQ2500-185-CBERHANXX-5-CGATGT
	HISEQ2500-185-CBERHANXX-5-CAGATC
	HISEQ2500-185-CBERHANXX-5-CCGTCC
	HISEQ2500-185-CBERHANXX-5-GATCAG
	HISEQ2500-185-CBERHANXX-5-CGTACG
)

ID=${IDS[$SLURM_ARRAY_TASK_ID-1]}
REF=${REFS[$SLURM_ARRAY_TASK_ID-1]}
echo $ID
echo $REF

mkdir -p $ID
cd $ID

agalma expression --id $ID $REF
